<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uvicorn App Preview</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>

    <!-- Tab Buttons -->
    <div class="tab-bar">
        <button class="tab-link active" onclick="openTab(event, 'Simulation')">Simulation</button>
        <div class="theme-switch-wrapper">
            <label class="theme-switch" for="theme-toggle">
                <input type="checkbox" id="theme-toggle" />
                <span class="slider"></span>
            </label>
        </div>
    </div>

    <!-- Tab 1: Simulation -->
    <div id="Simulation" class="tab-content main-content" style="display: flex;">
        <div id="left-menu">
            <h2>Parameters</h2>
            <form id="param-form">
                <div>
                    <label for="rule-select">
                        Rule 
                        <span class="info-icon" data-info="Select the cellular automaton rule to simulate.">ⓘ</span>
                    </label>
                    <select name="rule" id="rule-select"></select>
                </div>
                <div>
                    <label for="init-method-select">
                        Init Method
                        <span class="info-icon" data-info="Select the initialization method: 'single' for a single live cell, 'random' for random initialization.">ⓘ</span>
                    </label>
                    <select name="init_method" id="init-method-select"></select>
                </div>
                <div>
                    <label for="height-input">
                        Height
                        <span class="info-icon" data-info="Height of the simulation grid in cells.">ⓘ</span>
                    </label>
                    <input type="number" id="height-input" name="height" value="300" required>
                </div>
                <div>
                    <label for="width-input">
                        Width
                        <span class="info-icon" data-info="Width of the simulation grid in cells.">ⓘ</span>
                    </label>
                    <input type="number" id="width-input" name="width" value="300" required>
                </div>
                <div>
                    <label for="iterations-input">
                        Iterations
                        <span class="info-icon" data-info="Number of generations to simulate.">ⓘ</span>
                    </label>
                    <input type="number" id="iterations-input" name="iterations" value="150" required>
                </div>
                <div id="density-container">
                    <label for="density-input">
                        Percentage (%)
                        <span class="info-icon" data-info="For Random init method. Value between 0 and 1 (0.5 = 50%).">ⓘ</span>
                    </label>
                    <input type="number" id="density-input" name="density" min="0" max="1" step="0.01" value="0.5">
                </div>
                <div>
                    <label for="print-method-select">
                        Print Method
                        <span class="info-icon" data-info="Select the backend library to generate the image. This is for demonstration purposes.">ⓘ</span>
                    </label>
                    <select name="print_method" id="print-method-select"></select>
                </div>
                <div id="pixel_size">
                    <label for="pixel-size-input">
                        Pixel Size
                        <span class="info-icon" data-info="Sets the size of each cell in pixels for the output image.">ⓘ</span>
                    </label>
                    <input type="number" id="pixel-size-input" name="pixel_size" value="1" required>
                </div>
                <button type="submit">Send</button>
                <button type="button" id="save-image-btn" style="display:none;">Guardar imagen</button>
            </form>
        </div>
        <div id="right-panel" style="overflow:auto; max-height:80vh;">
            <canvas id="image-canvas" style="width:100%; height:auto; display:block;"></canvas>
        </div>
    </div>

    <!-- Info Popup Container -->
    <div id="info-popup"></div>

    <script src="/static/script.js"></script>
</body>
</html>
